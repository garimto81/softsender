# PRD: Two-Panel Split UI for Soft Content Sender

## 📋 Product Requirements Document

### Version: 2.0
### Date: 2025-10-03
### Status: Planning

---

## 1. Executive Summary

### 1.1 Purpose
포커 대회장 현장에서 실시간으로 플레이어 정보를 수집하고 전송하는 모바일 최적화 웹 애플리케이션의 UI/UX 전면 개선

### 1.2 Problem Statement
**현재 문제점:**
- 스마트폰에서 헤더와 모드 버튼이 너무 작게 표시됨
- 선택된 플레이어 카드를 스크롤 방식으로 표시하여 UX 수준이 낮음
- 한 화면에 모든 기능을 효율적으로 배치하지 못함

**사용자 시나리오:**
1. 사용자는 대회장에서 포커 테이블을 순회하며 모니터링
2. 테이블 발견 시 해당 테이블 번호 선택
3. 플레이어 리스트에서 원하는 플레이어들을 빠르게 선택
4. 각 플레이어의 모드(칩업/탈락/프로필)와 관련 정보 입력
5. 전송 후 다음 테이블로 이동

### 1.3 Solution Overview
**Two-Panel Split UI 방식:**
- 좌측: 플레이어 선택 그리드 (고정, 안정적)
- 우측: 입력 패널 (동적, 선택된 플레이어만 표시)
- 한 화면에 모든 기능 배치, 스크롤 최소화

**테이블 선택 화면:**
- 카드형 최근 테이블 (가로 스크롤)
- Room별 그룹화된 전체 테이블 리스트
- 테이블 선택 즉시 작업 화면 전환 (버튼 불필요)

**개발 아키텍처:**
- 모듈화된 소스 코드 구조 (개발 시)
- Node.js 빌드 시스템으로 하나로 패킹 (배포 시)
- Apps Script에는 빌드된 단일 파일만 업로드

---

## 2. Goals & Objectives

### 2.1 Primary Goals
1. **빠른 작업 속도**: 테이블당 처리 시간 30초 이내
2. **실수 방지**: 명확한 시각적 피드백으로 오입력 최소화
3. **모바일 최적화**: 스마트폰에서 한 손 조작 가능
4. **범용성**: 스마트폰/태블릿/PC 모두 지원

### 2.2 Success Metrics
- 플레이어 선택 속도: 3명 선택 5초 이내
- 입력 완료 속도: 3명 입력 15초 이내
- 전송 성공률: 99% 이상
- 사용자 만족도: 4.5/5.0 이상

---

## 3. User Stories

### 3.1 Primary User Stories

#### US-1: 빠른 테이블 선택
```
As a 현장 스태프
I want to 테이블을 직관적으로 빠르게 선택하고
So that 대기 시간 없이 즉시 작업을 시작할 수 있다
```

**Acceptance Criteria:**
- 최근 테이블 카드형 표시 (터치 영역 120×140px)
- 전체 테이블 Room별 그룹화 리스트
- 테이블 선택 즉시 작업 화면 전환 (시작 버튼 불필요)
- 선택 시 플레이어 그리드 자동 로딩 (1초 이내)
- BB 값 자동 저장/복원

#### US-2: 효율적인 플레이어 선택
```
As a 현장 스태프
I want to 플레이어를 터치만으로 빠르게 선택하고
So that 그리드가 흔들리지 않고 안정적으로 작업할 수 있다
```

**Acceptance Criteria:**
- 그리드 레이아웃 절대 변하지 않음
- 선택 시 즉시 우측 패널에 입력 카드 추가
- 재선택 시 선택 해제 및 카드 제거

#### US-3: 편리한 정보 입력
```
As a 현장 스태프
I want to 선택된 플레이어의 정보를 우측 패널에서 입력하고
So that 스크롤 없이 모든 정보를 한눈에 볼 수 있다
```

**Acceptance Criteria:**
- 우측 패널에 선택된 플레이어만 표시
- 입력창 자동 포커스
- BB 자동 계산 실시간 표시

#### US-4: 혼합 모드 지원
```
As a 현장 스태프
I want to 칩업과 탈락을 동시에 처리하고
So that 한 번의 전송으로 여러 모드를 처리할 수 있다
```

**Acceptance Criteria:**
- 모드 전환 시 기존 선택 유지
- 각 플레이어별 독립적인 모드 설정
- 모드별 다른 입력 필드 표시

---

## 4. Functional Requirements

### 4.1 Layout Structure

#### 4.1.1 Header (40-56px)
- **Room Selector**: 드롭다운
- **Table Selector**: 드롭다운
- **BB Input**: 숫자 입력 (콤마 자동 포맷)
- **Mode Tabs**: 칩업/탈락/프로필 (현재 모드 하이라이트)
- **Settings Button**: 설정 모달 오픈

#### 4.1.2 Main Split Panel (flex: 1)
**좌측 패널 (35-40%):**
- 플레이어 그리드 (2열 또는 3열)
- 각 셀: Seat 번호, 이름(축약), 선택 상태 표시
- 최소 터치 영역: 44×44px

**우측 패널 (60-65%):**
- 선택된 플레이어 입력 카드 리스트
- 스크롤 가능 (선택 많을 시)
- 빈 상태: "선택된 플레이어가 없습니다" 메시지

#### 4.1.3 Footer (64-80px)
- **Send Button**: 전송 버튼
- 전송 인원 표시 (예: "📤 전송 (3명)")
- Safe Area 대응

### 4.2 Player Grid Behavior

#### 4.2.1 기본 상태
- 9개 플레이어 슬롯 (최대 인원)
- 빈 슬롯은 비활성화 표시
- 각 셀: 회색 배경, 얇은 테두리

#### 4.2.2 선택 상태
- 선택된 셀: 모드별 색상 배경 + 굵은 테두리
  - 칩업: Green (#19D27C)
  - 탈락: Red (#FF6464)
  - 프로필: Blue (#4A9EFF)
- 선택 인디케이터: ● (채운 원)

#### 4.2.3 인터랙션
- 터치: 선택/해제 토글
- 햅틱 피드백: 10ms 진동
- 애니메이션: 0.2s 부드러운 전환

### 4.3 Input Panel Behavior

#### 4.3.1 카드 구조
```
╔═══════════════════════════╗
║ ● 김철수 🇰🇷            × ║ ← 헤더 (이름, 삭제 버튼)
║ ─────────────────────────  ║
║ [입력 필드들]              ║ ← 모드별 입력 UI
║                            ║
╚═══════════════════════════╝
```

#### 4.3.2 모드별 입력 필드

**칩업 (PU) 모드:**
```
┌─────────────────────────┐
│ 스택: [2,500,000____]   │
│ → 50 BB                 │
└─────────────────────────┘
```

**탈락 (ELIM) 모드:**
```
┌─────────────────────────┐
│ 상금: [유 ▼]            │
│ 금액: [1,000,000____]   │ (상금 "유" 선택 시만 표시)
└─────────────────────────┘
```

**프로필 (L3) 모드:**
```
┌─────────────────────────┐
│ 프로필 자막: 이름만 사용│
└─────────────────────────┘
```

#### 4.3.3 자동 계산
- BB 계산: `BB = STACK / BIG_BLIND` (반올림)
- 실시간 업데이트
- 콤마 포맷팅 자동 적용

### 4.4 Mode Switching

#### 4.4.1 모드 변경 시
- 현재 활성 모드 시각적 하이라이트
- **기존 선택 유지** (중요!)
- 새로운 선택은 새 모드로 추가
- 입력 필드는 각 플레이어의 모드에 따라 표시

#### 4.4.2 모드별 색상
- 칩업: Green 계열
- 탈락: Red 계열
- 프로필: Blue 계열

### 4.5 Data Validation

#### 4.5.1 필수 입력 검증
- **칩업**: 스택 값 필수, BB 값 필수
- **탈락**: 상금 유/무 필수, "유" 선택 시 금액 필수
- **프로필**: 추가 입력 없음 (이름만 사용)

#### 4.5.2 에러 처리
- 빈 값: Toast 메시지 + 해당 입력창 하이라이트
- 네트워크 오류: 재전송 옵션 제공
- 성공: "✅ N개 전송 완료" 메시지

---

## 5. Non-Functional Requirements

### 5.1 Performance
- 초기 로딩: 2초 이내
- 플레이어 선택 응답: 100ms 이내
- 전송 완료: 3초 이내
- 애니메이션: 60fps 유지

### 5.2 Responsive Design

#### 5.2.1 스마트폰 (< 768px)
- 그리드: 2열 (35% 너비)
- 입력 패널: 65% 너비
- 헤더: 2줄 배치 가능

#### 5.2.2 태블릿 (768px ~ 1024px)
- 그리드: 3열 (40% 너비)
- 입력 패널: 60% 너비
- 더 큰 터치 영역

#### 5.2.3 PC (≥ 1024px)
- 그리드: 3열 또는 9열 (50% 너비)
- 입력 패널: 50% 너비
- 마우스 호버 효과 추가

### 5.3 Accessibility
- 최소 터치 영역: 44×44px
- 색상 대비비: WCAG AA 준수
- 폰트 크기: 최소 14px (입력창 16px 이상)
- 키보드 탐색 지원 (Tab, Enter)

### 5.4 Browser Support
- Chrome 90+
- Safari 14+
- Edge 90+
- Mobile Safari (iOS 14+)
- Chrome Mobile (Android 10+)

---

## 6. User Flows

### 6.1 Main Flow: 칩업 처리

```
1. 테이블 선택
   └─> Room: MGM 선택
   └─> Table: #15 선택
   └─> BB: 50,000 입력
   └─> 플레이어 그리드 로딩

2. 모드 선택
   └─> "칩업" 탭 클릭 (기본 활성)

3. 플레이어 선택
   └─> Seat #1 "김철수" 클릭
   └─> 좌측 그리드: #1 셀 Green 하이라이트
   └─> 우측 패널: "김철수" 카드 추가

   └─> Seat #3 "박민수" 클릭
   └─> 좌측 그리드: #3 셀 Green 하이라이트
   └─> 우측 패널: "박민수" 카드 추가

4. 정보 입력
   └─> 김철수 카드: 스택 "2,500,000" 입력
   └─> 자동 계산: "→ 50 BB" 표시

   └─> 박민수 카드: 스택 "1,800,000" 입력
   └─> 자동 계산: "→ 36 BB" 표시

5. 전송
   └─> "📤 전송 (2명)" 버튼 클릭
   └─> 로딩 표시
   └─> 성공 Toast: "✅ 2개 전송 완료"
   └─> 선택 상태 초기화

6. 다음 테이블
   └─> Table: #20 선택
   └─> 반복...
```

### 6.2 Advanced Flow: 혼합 모드

```
1. 칩업 2명 선택
   └─> 김철수, 이영희 선택 (Green)
   └─> 스택 입력

2. 모드 전환
   └─> "탈락" 탭 클릭
   └─> 기존 칩업 선택 유지!

3. 탈락 1명 추가
   └─> 박민수 선택 (Red)
   └─> 상금 "유" 선택
   └─> 금액 "500,000" 입력

4. 최종 상태
   └─> 우측 패널:
       - 김철수 (Green) - 스택 입력
       - 이영희 (Green) - 스택 입력
       - 박민수 (Red) - 상금 입력

5. 전송
   └─> "📤 전송 (3명)" 클릭
   └─> 혼합 모드 일괄 전송
```

---

## 7. Edge Cases & Error Handling

### 7.1 Edge Cases

#### 7.1.1 플레이어 0명
- 그리드: 빈 슬롯 9개 표시 (비활성)
- 입력 패널: "플레이어가 없습니다" 메시지
- 전송 버튼: 비활성 (disabled)

#### 7.1.2 선택 해제
- 그리드 재클릭 시 선택 해제
- 우측 카드 즉시 제거
- 애니메이션: Fade out (200ms)

#### 7.1.3 빠른 연속 선택
- 각 선택마다 즉시 처리
- 디바운스 없음 (실시간 반영)

### 7.2 Error Scenarios

#### 7.2.1 네트워크 오류
```
Toast: "❌ 전송 실패: 네트워크 오류"
Action: 재전송 버튼 표시
State: 입력 데이터 유지 (재시도 가능)
```

#### 7.2.2 부분 실패
```
Toast: "⚠️ 2개 성공, 1개 실패"
Action: 실패 항목만 재시도 옵션
```

#### 7.2.3 입력 검증 실패
```
Toast: "❌ 김철수의 스택을 입력하세요"
Action: 해당 입력창 빨간 테두리 + 포커스
```

---

## 8. Future Enhancements

### Phase 2 (v2.1)
- [ ] 오프라인 모드: LocalStorage에 임시 저장
- [ ] 일괄 입력: 모든 선택 플레이어에 동일 값 적용
- [ ] 템플릿: 자주 사용하는 값 저장

### Phase 3 (v2.2)
- [ ] 음성 입력: 스택 값 음성으로 입력
- [ ] QR 코드: 플레이어 정보 스캔
- [ ] 히스토리: 최근 전송 내역 조회

---

## 9. Dependencies & Constraints

### 9.1 Technical Dependencies
- Google Apps Script Runtime
- Google Sheets API
- Modern Browser (ES6+ support)
- Node.js 16+ (개발 환경)
- npm (빌드 도구)

### 9.2 Design Constraints
- 100vh 이내 모든 UI 배치 (스크롤 최소화)
- Safe Area 대응 필수 (iOS notch)
- 햅틱 피드백 지원 (지원 기기만)

### 9.3 Business Constraints
- 기존 데이터 구조 호환성 유지
- 기존 백엔드 로직 변경 최소화
- 배포: Google Apps Script Web App

### 9.4 Development Workflow
- **개발**: 모듈화된 소스 파일 편집 (src/)
- **빌드**: `npm run build` 또는 `npm run dev` (watch mode)
- **배포**: dist/page.html을 Apps Script에 복사
- **버전 관리**: src/ 폴더만 Git 커밋

---

## 10. Appendix

### 10.1 Design Inspiration
- Native iOS/Android 앱 UX 패턴
- Material Design 3 가이드라인
- Apple Human Interface Guidelines

### 10.2 Reference Screenshots
- [기존 UI 스크린샷]
- [제안 UI 와이어프레임]
- [경쟁 제품 분석]

### 10.3 Glossary
- **PU (Power Up)**: 칩업 모드
- **ELIM (Elimination)**: 탈락 모드
- **L3 (Lower Third)**: 프로필 자막 모드
- **BB (Big Blind)**: 빅 블라인드
- **Safe Area**: iOS 노치/홈 인디케이터 영역

---

## Approval

| Role | Name | Signature | Date |
|------|------|-----------|------|
| Product Owner | | | |
| Tech Lead | | | |
| UX Designer | | | |

---

**Document Control**
- Version: 3.0
- Last Updated: 2025-10-03
- Next Review: 2025-10-10
- Changes in v3.0:
  - 테이블 선택 화면 추가 (카드형 + 리스트)
  - Node.js 빌드 시스템 도입
  - 모듈화 아키텍처 명시
